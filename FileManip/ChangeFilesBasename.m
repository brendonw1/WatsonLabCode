function ChangeFilesBasenamedirpath=uigetdir('find the directory where the files to be changed are');oldbasename = strfind(dirpath,'/');%assume the basename can be found from the directory name...oldbasename = dirpath((oldbasename(end)+1):end);oldbasename=inputdlg('Enter old basename to be replaced','Old Name',1,{oldbasename});oldbasename = oldbasename{1};newbasename=inputdlg('Enter new basename for files','New Name',1,{oldbasename});newbasename=newbasename{1};d=getdir(dirpath);if strcmp(d(1).name,'Thumbs.db');    d(1)=[];endfor a=1:length(d);    if ~isdir([dirpath,'\',d(a).name])                oldfilepath = fullfile(dirpath,d(a).name);        [pathstr, oldfilename, ext] = fileparts(oldfilepath);                basestartspot = strfind(oldfilename,oldbasename);        if ~isempty(basestartspot)            beforebase = oldfilename(1:(basestartspot-1));            afterbase = oldfilename((basestartspot+length(oldbasename)):end);            newfilename = [beforebase, newbasename, afterbase];            newfilepath = fullfile(pathstr, newfilename);            newfilepath = [newfilepath, ext];                %         periods = findstr(d(a).name,'.');    %         d(a).name = strcat(newbasename,d(a).name(periods(1):end));    %         newfilepath = fullfile(dirpath,d(a).name);            movefile(oldfilepath,newfilepath);        end        %         suff=d(a).name(end-3:end);    %     fullname=[name,' ',num2str(a),suff];%         fullname=[name,' ',addzerostonumberstring(a,3),suff];        h=waitbar(a/length(d));    endendclose (h)