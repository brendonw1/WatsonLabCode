function ChangePartOfFilenamesdirpath=uigetdir('find the directory where the files to be changed are');oldstring = strfind(dirpath,'/');%assume the basename can be found from the directory name...oldstring = dirpath((oldstring(end)+1):end);oldstring=inputdlg('Enter old string to be replaced','Old String',1,{oldstring});oldstring = oldstring{1};newstring=inputdlg('Enter new string to replace old string','New String',1);newstring=newstring{1};d=getdir(dirpath);if strcmp(d(1).name,'Thumbs.db');    d(1)=[];endfor a=1:length(d);    if ~isdir([dirpath,'\',d(a).name])                oldfilepath = fullfile(dirpath,d(a).name);        [pathstr, oldfilename, ext] = fileparts(oldfilepath);                if ~isempty(oldfilename);            if ~isempty(strfind(oldfilename,oldstring))                %                 beforebase = oldfilename(1:(basestartspot-1));%                 afterbase = oldfilename((basestartspot+length(oldstring)):end);%                 newfilename = [beforebase, newstring, afterbase];%                 newfilepath = fullfile(pathstr, newfilename);%                 newfilepath = [newfilepath, ext];% %         %         periods = findstr(d(a).name,'.');%         %         d(a).name = strcat(newbasename,d(a).name(periods(1):end));%         %         newfilepath = fullfile(dirpath,d(a).name);                newfilename = strrep(oldfilename,oldstring,newstring);                newfilepath = fullfile(dirpath,[newfilename ext]);                movefile(oldfilepath,newfilepath);            end        end        %         suff=d(a).name(end-3:end);    %     fullname=[name,' ',num2str(a),suff];%         fullname=[name,' ',addzerostonumberstring(a,3),suff];        h=waitbar(a/length(d));    endendclose (h)